<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Module Customizer</title>
        <style id="color-theme">
/* 取材自 GitHub Light/Dark Colorblind 颜色主题，使用 Gemini-2.5 Pro 自动生成 */
:root {
    /* 背景颜色 */
    --body-background-color: #ffffff; /* editor.background */
    --section-background-color: #f6f8fa; /* panel.background or sideBar.background */
    --detail-background-color: #f6f8fa; /* Similar to section */
    --navbar-background-color: #e6e8ea; /* editorGroupHeader.tabsBackground or sideBar.background */
    --subnav-background-color: #e6e8ea; /* Similar to navbar, or for table headers */
    --selected-background-color: #0969da; /* badge.background or textLink.foreground (used as bg) */
    --even-row-color: #f6f8fa; /* Slightly off-white, like section backgrounds */
    --odd-row-color: #ffffff; /* editor.background, for alternating rows */

    /* 文本颜色 */
    --body-text-color: #24292f; /* foreground or editor.foreground */
    --block-text-color: #24292f; /* foreground */
    --navbar-text-color: #57606a; /* tab.inactiveForeground or titleBar.activeForeground */
    --selected-text-color: #ffffff; /* button.foreground (white text on blue background) */
    --selected-link-color: #ffffff; /* Assuming white link on selected blue background */
    --title-color: #24292f; /* settings.headerForeground or main foreground */
    --link-color: #0969da; /* textLink.foreground */
    --toc-link-color: #0969da; /* textLink.foreground */
    --link-color-active: #0969da; /* textLink.activeForeground */

    /* 特定功能颜色 */
    --snippet-background-color: #afb8c133; /* textCodeBlock.background. Note: includes alpha. Solid: #f6f8fa */
    --snippet-text-color: #57606a; /* textPreformat.foreground */
    --snippet-highlight-color: #0969da; /* list.highlightForeground (for highlighted text) */
    --border-color: #d0d7de; /* panel.border or textBlockQuote.border */
    --table-border-color: #d0d7de; /* panel.border */
    --search-input-background-color: #ffffff; /* input.background */
    --search-input-text-color: #24292f; /* input.foreground */
    --search-input-placeholder-color: #6e7781; /* input.placeholderForeground */
    --search-tag-highlight-color: #bf8700; /* editor.findMatchBackground (background for search tags) */
    --copy-icon-brightness: 1.0; /* Assume 1.0 is normal. GitHub icon.foreground is #57606a, suitable for light theme */
    --copy-button-background-color-active: #0969da; /* button.hoverBackground */
    --invalid-tag-background-color: #b35900; /* errorForeground, used as background for emphasis */
    --invalid-tag-text-color: #ffffff; /* White text for contrast on the orange error background */
}

@media(prefers-color-scheme: dark) {
    :root {
        /* 背景颜色 */
        --body-background-color: #0d1117; /* editor.background */
        --section-background-color: #161b22; /* editorWidget.background or panel.background (darker: #010409) */
        --detail-background-color: #161b22; /* Similar to section */
        --navbar-background-color: #010409; /* editorGroupHeader.tabsBackground or sideBar.background */
        --subnav-background-color: #010409; /* editorGroupHeader.tabsBackground or table header-like */
        --selected-background-color: #1f6feb; /* button.background or list.activeSelectionBackground (greyer: #6e768166) */
        --even-row-color: #161b22; /* A slightly different dark shade, like editorWidget.background */
        --odd-row-color: #0d1117; /* editor.background, for alternating rows */

        /* 文本颜色 */
        --body-text-color: #c9d1d9; /* foreground or editor.foreground */
        --block-text-color: #c9d1d9; /* foreground */
        --navbar-text-color: #8b949e; /* tab.inactiveForeground or titleBar.activeForeground */
        --selected-text-color: #ffffff; /* button.foreground (on a blue background) */
        --selected-link-color: #ffffff; /* Assuming white link on selected blue background for contrast */
        --title-color: #c9d1d9; /* settings.headerForeground or main foreground */
        --link-color: #58a6ff; /* textLink.foreground */
        --toc-link-color: #58a6ff; /* textLink.foreground */
        --link-color-active: #58a6ff; /* textLink.activeForeground */

        /* 特定功能颜色 */
        --snippet-background-color: #6e768166; /* textCodeBlock.background or textPreformat.background */
        --snippet-text-color: #8b949e; /* textPreformat.foreground */
        --snippet-highlight-color: #58a6ff; /* list.highlightForeground (for highlighted text, not background) */
        --border-color: #30363d; /* panel.border or textBlockQuote.border */
        --table-border-color: #30363d; /* panel.border */
        --search-input-background-color: #0d1117; /* input.background */
        --search-input-text-color: #c9d1d9; /* input.foreground */
        --search-input-placeholder-color: #6e7681; /* input.placeholderForeground */
        --search-tag-highlight-color: #9e6a03; /* editor.findMatchBackground (background for search tags) */
        --copy-icon-brightness: 1.2; /* Assuming a multiplier for filter: brightness(). 1 is normal. GitHub icons are #8b949e, general text #c9d1d9, so slightly brighter. */
        --copy-button-background-color-active: #388bfd; /* button.hoverBackground */
        --invalid-tag-background-color: #d47616; /* errorForeground, used as background */
        --invalid-tag-text-color: #ffffff; /* For contrast against an orange/error background */
    }
}
        </style>
        <style id="main-style">
* {
    font-family: 'Fira Code', 'Fira Sans Mono', 'Consolas', 'Lucida Console', 'Courier New', monospace;
    font-size: 12pt;
    user-select: none;

    scrollbar-color: var(--body-text-color) var(--section-background-color);
    scrollbar-width: thin;
}

a {
    color: var(--link-color);
}

.selectable-code {
    user-select: auto;
}

select {
    color: var(--search-input-text-color);
    background-color: var(--search-input-background-color);
}

body {
    background-color: var(--body-background-color);
    color: var(--body-text-color);

    width: calc(100vw - 2em);
    height: calc(100vh - 2em);
    margin: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    column-gap: 1em;
    padding: 1em;
}

body > div {
    flex: 1 0 auto;
    min-height: 0px;
    max-height: 100%;
    display: flex;
    flex-direction: column;
}

#options {
    border: 1px solid var(--border-color);
    padding: 0.75em;
    row-gap: 1em;
    background-color: var(--section-background-color);
}

.card-title {
    font-size: 14pt;
}

#version-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    row-gap: 0.5em;
}

#modules-selector {
    display: flex;
    flex-direction: column;
    row-gap: 0.5em;
    align-items: flex-start;
    border: 1px solid var(--border-color);
    padding: 0.5em;
    min-height: 0px;
    max-height: 100%;
    overflow: auto;
}

.module-details {
    font-size: 10pt;
    margin-top: 0.25em;
}

.module-switch-container {
    display: flex;
    align-items: flex-start;
}

#tabs {
    display: flex;
    flex-direction: row;
}

#tabs > div {
    background-color: var(--navbar-background-color);
    color: var(--navbar-text-color);
    border: 1px solid var(--border-color);
    border-right: none;
    padding: 0.5em;
    cursor: pointer;
}

#tabs > div:last-child {
    border-right: 1px solid var(--border-color);
}

#tabs > div.current {
    background-color: var(--selected-background-color);
    border-bottom: 1px solid var(--selected-background-color);
    color: var(--selected-text-color);
}

#generated-content {
    flex: 1 0 auto;
    min-height: 0px;
    max-height: 100%;
    overflow: auto;
    padding: 0.5em;
    background-color: var(--detail-background-color);
    border: 1px solid var(--border-color);
}
        </style>
        <style id="runtime-style-stub">
        </style>

        <script id="modules-metadata" type="application/json">
{
    "editions": [
        ["0.4.4", "Automatic nested structure initialization"],
        ["0.4.3", "Automatic function pointer auto-wrapping"],
        ["0.4.2", "Full wchar_t support, bugfixes to library loading mechanism"],
        ["0.4.1", "Collection<T> variants of allocate/write series functions, LWGJL-alike set methods for structure array fields, C-style null-terminated string utilites"],
        ["0.4.0", "Library loading enhancements"],
        ["0.3.4", "Bugfixes"],
        ["0.3.3", "Bugfixes"],
        ["0.3.2", "varargs variants of write series functions, set method chaining, LWJGL-alike set [methods for structure members, access constants via command wrapper classes"],
        ["0.3.1", "Bugfixes"],
        ["0.3.0", "Fresh start, code generator rewrite"]
    ],
    "ffmPlus": {
        "module": "ffm-plus",
        "versions": [
            "0.2.7",
            "0.2.6",
            "0.2.5",
            "0.2.4",
            "0.2.3",
            "0.2.2",
            "0.2.1",
            "0.2.0"
        ],
        "encapsulationEditionUseMinVersion": {
            "0.4.4": "0.2.7",
            "0.4.3": "0.2.6",
            "0.4.2": "0.2.6",
            "0.4.1": "0.2.5",
            "0.4.0": "0.2.4",
            "0.3.4": "0.2.2",
            "0.3.3": "0.2.1",
            "0.3.2": "0.2.1",
            "0.3.1": "0.2.0",
            "0.3.0": "0.2.0"
        }
    },
    "modules": [
        {
            "name": "Vulkan",
            "module": "vulkan",
            "since": "0.3.0",
            "description": "Vulkan is a new generation graphics and compute API that provides high-efficiency, cross-platform access to modern GPUs used in a wide variety of devices from PCs and consoles to mobile phones and embedded platforms."
        },
        {
            "name": "Vulkan Memory Allocator",
            "module": "vma",
            "since": "0.3.0",
            "description": "Vulkan Memory Allocator (VMA) is an easy to integrate library that help game developers to manage memory allocations and resource creation."
        },
        {
            "name": "GLFW",
            "module": "glfw",
            "since": "0.3.0",
            "description": "GLFW is an Open Source, multi-platform library for OpenGL, OpenGL ES and Vulkan development on the desktop. It provides a simple API for creating windows, contexts and surfaces, receiving input and events."
        },
        {
            "name": "OpenGL",
            "module": "opengl",
            "since": "0.3.2",
            "description": "The industry's foundation for high performance graphics, from games to virtual reality, mobile phones to supercomputers."
        },
        {
            "name": "OpenAL",
            "module": "openal",
            "since": "0.3.2",
            "description": "OpenAL is a cross-platform 3D audio API appropriate for use with gaming applications and many other types of audio applications."
        },
        {
            "name": "STB",
            "module": "stb",
            "since": "0.3.4",
            "description": "STB is a collection of single-file public domain libraries for C/C++ that provide various utilities such as image loading, font rendering, and more."
        },
        {
            "name": "OpenCL",
            "module": "opencl",
            "since": "0.4.4",
            "description": "OpenCL is the ultimate standard for cross-platform parallel programming on any hardware."
        },
        {
            "name": "OpenGL ES 2.0 Only",
            "module": "gles2",
            "since": "0.3.0",
            "description": "OpenGL ES is royalty-free, cross-platform API for full-function 2D and 3D graphics on embedded systems - including consoles, phones, appliances and vehicles. It consists of well-defined subsets of desktop OpenGL, creating a flexible and powerful low-level interface between software and graphics acceleration.",
            "status": "obsolete"
        },
        {
            "name": "OpenXR",
            "module": "openxr",
            "since": "0.4.1",
            "description": "OpenXR is a royalty-free, open standard that provides a common set of APIs for developing XR applications that run across a wide range of AR and VR devices.",
            "status": "experimental"
        },
        {
            "name": "WebGPU Native",
            "module": "webgpu",
            "since": "0.4.2",
            "description": "WebGPU is an API that exposes the capabilities of GPU hardware for the Web.",
            "status": "experimental"
        }
    ]
}
        </script>

        <script id="coreutils">
const $ = element => document.querySelector(element)

const semVerLessThanOrEqualTo = (a, b) => {
    const aParts = a.split('.').map(Number)
    const bParts = b.split('.').map(Number)
    const maxLength = Math.max(aParts.length, bParts.length)

    for (let i = 0; i < maxLength; i++) {
        const aPart = aParts[i] || 0
        const bPart = bParts[i] || 0

        if (aPart < bPart) {
            return true
        } else if (aPart > bPart) {
            return false
        }
    }
    return true
}
        </script>
        <script id="main-script">
const metadata = JSON.parse($('#modules-metadata').innerText)
const editionDescriptions = {}
const modulesAvailableInEditions = {}
const compatibleFFMPlusVersions = {}

const main = () => {
    for (const [edition, description] of metadata.editions) {
        modulesAvailableInEditions[edition] = new Set()
        for (const module of metadata.modules) {
            if (module.since && semVerLessThanOrEqualTo(module.since, edition)) {
                modulesAvailableInEditions[edition].add(module.module)
            }
        }

        const minimalCompatibleFFMPlusVersion = metadata.ffmPlus.encapsulationEditionUseMinVersion[edition]
        const minimalCompatibleFFMPlusVersionIndex = metadata.ffmPlus.versions.indexOf(minimalCompatibleFFMPlusVersion)
        const cmpatibleFFMPlusVersions = metadata.ffmPlus.versions.slice(0, minimalCompatibleFFMPlusVersionIndex + 1)
        compatibleFFMPlusVersions[edition] = cmpatibleFFMPlusVersions

        $('#edition-select').append(new Option(edition, edition))
        editionDescriptions[edition] = description
    }

    const newestEdition = metadata.editions[0][0]

    let prevStatus = 'notset'
    for (const module of metadata.modules) {
        const moduleStatus = module.status
        if (moduleStatus !== prevStatus) {
            console.info(moduleStatus)
            const moduleStateElement = document.createElement('b')
            moduleStateElement.innerText = moduleStatus
                ? (moduleStatus.charAt(0).toUpperCase() + moduleStatus.slice(1))
                : 'Supported'
            $('#modules-selector').appendChild(moduleStateElement)
            prevStatus = moduleStatus
        }

        const moduleSwitch = document.createElement('input')
        moduleSwitch.type = 'checkbox'
        moduleSwitch.id = `module-${module.module}`
        moduleSwitch.dataset.module = module.module

        const moduleDetails = document.createElement('i')
        moduleDetails.className = 'details module-details'
        moduleDetails.innerText = module.description

        const moduleInfo = document.createElement('div')
        moduleInfo.className = 'module-info'
        moduleInfo.appendChild(document.createTextNode(module.name))
        moduleInfo.appendChild(moduleDetails)

        const moduleSwitchContainer = document.createElement('div')
        moduleSwitchContainer.className = 'module-switch-container'
        moduleSwitchContainer.appendChild(moduleSwitch)
        moduleSwitchContainer.appendChild(moduleInfo)

        $('#modules-selector').appendChild(moduleSwitchContainer)
    }

    for (const compatibleFFMPlusVersion of compatibleFFMPlusVersions[newestEdition]) {
        $('#ffm-plus-select').append(new Option(compatibleFFMPlusVersion, compatibleFFMPlusVersion))
    }

    const editionChangelog = $('#edition-changelog')
    editionChangelog.href = `https://github.com/club-doki7/vulkan4j/releases/tag/v${newestEdition}`
    editionChangelog.innerText = `Edition ${newestEdition} release notes`

    changeDetailedDisplay()
}

const changeDetailedDisplay = () => {
    const isChecked = $('#detailed-display-switch').checked
    if (isChecked) {
        $('#runtime-style-stub').innerText = '.details { display: block; }'
    } else {
        $('#runtime-style-stub').innerText = '.details { display: none; }'
    }
}

document.addEventListener('DOMContentLoaded', main)
        </script>
    </head>
    <body>
        <div id="options">
            <b class="card-title">Options</b>
            <div>
                <input type="checkbox" id="detailed-display-switch" onchange="changeDetailedDisplay()">Show detailed descriptions</input>
            </div>
            <div id="version-selector">
                    <span>Edition:</span>
                    <select id="edition-select">
                        <option value="newest">Newest - auto</option>
                    </select>
                    <span>ffm-plus version:</span>
                    <select id="ffm-plus-select">
                        <option value="newest">Newest - auto</option>
                        <option value="minimal">Minimal compatible - auto</option>
                    </select>
            </div>
            <a id="edition-changelog"></a>
            <b class="card-title">Modules</b>
            <div id="modules-selector">
            </div>
        </div>
        <div id="generated">
            <div id="tabs">
                <div class="current">Maven</div>
                <div>Gradle (Kotlin)</div>
                <div>Gradle (Groovy)</div>
                <div>VM Options</div>
                <div>Manifest</div>
            </div>
            <div id="generated-content"></div>
        </div>
    </body>
</html>
